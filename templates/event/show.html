{% extends "base.html" %}
{% block title %}Event {{ response['event'].name}} Information{% endblock %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}
        <h1>{{ self.title() }}</h1>

    <button type="button" class="btn btn-danger" id="hiddenDelete" onclick="$('#deleteFlash').toggleClass('hidden'); $('#hiddenDelete').toggleClass('hidden');">Delete Event</button>

        <div class="alert alert-danger alert-dismissible hidden" id= "deleteFlash" role="alert">
            <button type="button" onclick="$('#hiddenDelete').toggleClass('hidden');" class="close" data-dismiss="alert"
                    aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <strong>Warning!</strong> You cannot undo this action. Are you sure you want to delete the event and all its associated data?
            <div class="clearfix"></div>
            <a href="/event/{{ response['event'].id }}/delete" class="btn btn-success" >Yes! Delete</a>
        </div>

        <h2><a href="/event/{{response['event'].id}}/edit">General</a></h2>
        <table class="table table-bordered table-striped">
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Event Start Datetime</th>
                <th>Event Ending Datetime</th>
                <th>Set Up Start Time</th>
                <th>Teardown Ending Time</th>
            </tr>
            <tr>
                <td>{{ response['event'].name}}</td>
                <td>{{ response['event'].description }}</td>
                <td>{{ response['event'].date_start }}</td>
                <td>{{ response['event'].date_end }}</td>
                <td>{{ response['event'].setupStart }}</td>
                <td>{{ response['event'].teardownEnd }}</td>
            </tr>
        </table>

        <h2><a href="/event/{{response['event'].id}}/task">Tasks</a></h2>
        <table class="table table-bordered table-striped">
            <tr>
                <th>Name</th>
                <th>Date Due</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Assigned To</th>
            </tr>
        {% for task in response['task'] %}
            <tr>
                <td><a href="/event/{{task.event_id}}/task/{{task.id}}/edit">{{ task.name }}</a></td>
                <td>{{ task.dueDate }}</td>
                <td>{{ task.priority }}</td>
                <td>{{ task.status }}</td>
                <td>{{ task.assignedTo }}</td>
            </tr>
        {% endfor %}
        </table>

        <h2><a href="/event/{{response['event'].id}}/budget">Budget</a></h2>
         <table class="table table-bordered table-striped">
            <tr>
                <th>Total</th>
                <th>Description</th>
                <th>isPaid?</th>
                <th>Vendor ID</th>
            </tr>
        {% for invoice in budget %}
            <tr>
                <td>{{ budget[invoice].total }}</td>
                <td>{{ budget[invoice].description }}</td>
                <td>{{ budget[invoice].isPaid }}</td>
                <td>{{ budget[invoice].vendor_id }}</td>
            </tr>
        {% endfor %}
            <tr>
                <td>{{ totalExpense }}</td>
                <td><strong>Total Expenses</strong></td>
                <td>{{ totalSold }}</td>
                <td><strong>Number Paid</strong></td>
            </tr>
        </table>

        <h2><a href="/event/{{response['event'].id}}/ticket">Ticket</a></h2>
        <table class="table table-bordered table-striped">
            <tr>
                <th>Price</th>
                <th>Section</th>
                <th>Seat Num</th>
                <th>isSold</th>
            </tr>
        {% for ticket in response['ticket'][:-2] %}
            <tr>
                <td>{{ ticket.price }}</td>
                <td>{{ ticket.section }}</td>
                <td>{{ ticket.seat_num }}</td>
                <td>{{ ticket.isSold }}</td>
            </tr>
        {% endfor %}
            <tr>
                <td>{{ response['ticket'][-1].totalSold }}</td>
                <td>Price Total Sold</td>
                <td>Number Total Sold</td>
                <td>{{ response['ticket'][-2].totalSold }}</td>
            </tr>
        </table>
 {% endblock %}